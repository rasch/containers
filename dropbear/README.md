# dropbear

> Use `dropbear` to quickly share the current working directory over SSH

To start an SSH server with the current working directory mounted at `/data`
running on port `2022`:

```sh
dropbear

# or use a different port
PORT=5150 dropbear
```

And then log in from remote:

```sh
# change x.x.x.x to the actual [ip] address
ssh -p 2022 root@x.x.x.x
```

## configuration

The configuration files for `dropbear` SSH server are kept at
`$HOME/.config/xpod/dropbear`

### host key

This `dropbear` container uses the key at
`$HOME/.config/xpod/dropbear/dropbear_ed25519_host_key` as the host key. It is
automatically generated by the `dropbearkey` command if it doesn't exist. The
`dropbearconvert` command is also included in this container for converting keys
between `openssh` and `dropbear` formats if needed.

### authorized keys

If the file `$HOME/.config/xpod/dropbear/authorized_keys` exists, it is mounted
in the container for use by `dropbear`. If the `authorized_keys` file doesn't
exist, then password authentication must be enabled.

### password login

To enable password authentication, the `dropbear` server must be running and the
root password needs to be set in the container:

```sh
podman exec -it dropbear-2022 /bin/sh -l
passwd
```

It should now be possible to login from remote devices that are not on the
`authorized_keys` list. WARNING: It is not advisable to enable password logins
if running this container on a public facing IP address. This should only be
used for access over the local network. The password login does **not** persist
after restarting the container and is only intended for use in one-off
situations.

## logs

To view the server logs:

```sh
podman logs dropbear-2022

# or if using port `5150`
podman logs dropbear-5150
```
